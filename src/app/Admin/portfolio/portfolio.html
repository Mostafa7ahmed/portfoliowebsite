<article class="portfolio active activeScroll" data-page="portfolio">
  <header class="d-flex align-items-start  headerText">
    <h2 class="h2 article-title">Porjects</h2>
    <a class="btn hoverbtn" (click)="isOpen = true"> Add Porject </a>
  </header>

  <section class="projects">
    <ul class="project-list">
      <li class="project-item active" data-filter-item *ngFor="let project of projects">
        <a [href]="project.url" target="_blank">
          <figure class="project-img">
            <div class="project-item-icon-box">
              <i class="fa-regular fa-eye"></i>
            </div>
            <img [src]="baseurlFile + project.url" [alt]="project.name" loading="lazy" />
          </figure>
          <h3 class="project-title">{{ project.name }}</h3>
          <p class="project-category">{{ project.description }}</p>
          <div class="gruop">
            <span class="type" *ngFor="let type of project.tags">{{ type }}</span>
          </div>
          <div class="iconDelete icon text-white">
            <i class="fa-regular fa-trash-can"></i>
          </div>
        </a>
      </li>
    </ul>
  </section>
</article>


<div class="popup-backdrop" *ngIf="isOpen">
  <div class="popup">
    <div class="popup-header">
      <h3>Add Service</h3>
      <button class="close-btn" (click)="closePopup()">×</button>
    </div>

    <form class="popup-body" [formGroup]="formProject">
      <div class="upload-box" (click)="triggerFileInput()" [ngClass]="{ 'has-image': previewUrl }">
        <ng-container *ngIf="previewUrl; else placeholder">
          <img [src]="baseurlFile + previewUrl" alt="Preview" class="preview-img" />
        </ng-container>
        <ng-template #placeholder>
          <div class="d-flex justify-content-center align-items-center gap-3">
            <i class="fa fa-image"></i>
            <span>Upload course photo</span>
          </div>
        </ng-template>
      </div>
      <input type="file" #fileInput hidden (change)="onFileSelected($event)" accept="image/*" />
      <label>Name</label>
      <input type="text" formControlName="name" placeholder="Enter Topic Name" />

      <input type="file" #fileInput hidden (change)="onFileSelected($event)" accept="image/*" />

      <label>Service Description</label>
      <textarea formControlName="description" rows="3" placeholder="Enter Description"></textarea>

      <div class="tags-section" formArrayName="tags">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <label>Tags</label>
          <button type="button" class="add-btn" (click)="addTag()">+ Add Tag</button>
        </div>

        <div *ngFor="let tag of tags.controls; let i = index" class="tag-item">
          <input type="text" [formControlName]="i" placeholder="Enter tag" />
          <button type="button" class="remove-btn" (click)="removeTag(i)">×</button>
        </div>
      </div>
    </form>

    <div class="popup-footer">
      <button class="save-btn" (click)="save()">Done</button>
    </div>
  </div>
</div>